<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">

</head>
<body>
  
    <div class="movie">
     <h1>Enjoy Your Playlist<span style='font-size:40px;'>&#129505;</span></h1>
     <h1>About</h1>
     <a href="./moviepage.html"><h1 >palylist</h1></a>

     <div>
        <button id="signupme">Register/Login</button>
        <button id="logout">Logout</button>
     </div>
 

 


       
    </div>
    <hr style="color: white;">

    <div class="para">      <p>Discover, watch, and organize your favorite playlist with our user-friendly platform. Experience the magic of movies and playlists with our platform.<span >&#127925;</span> <span >&#127881;</span></p></div>
  
  


      <div class="imglist">

   




             <div>
            <img src="https://th.bing.com/th/id/OIP.1umjRUVLTbPQCPVU_q1HPgHaK-?w=120&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="">
            <p><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span></p>
        </div>



        <div>
            <img src="https://th.bing.com/th/id/OIP.1umjRUVLTbPQCPVU_q1HPgHaK-?w=120&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="">
            <p><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span></p>
        </div>



        <div>
            <img src="https://th.bing.com/th/id/OIP.1umjRUVLTbPQCPVU_q1HPgHaK-?w=120&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="">
            <p><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span><span >&#11088;</span></p>
        </div>


 
          <div id="discription">
           
            <h3>Welcome to </h3>
            <h4>Enjoy Your Playlist<span style='font-size:40px;'>&#129505;</span></h4>
            <p> if they all are  5 star<span >&#11088;</span> which one is best ?</p>
        </div>

     



      </div>

      <div class="wrapper">
        <!-- <i class="fas fa-angle-left" id="left"></i> -->
        <ul class="carousel">
          <li class="card">
            <div class="img">
              <img src="https://th.bing.com/th/id/OIP.1umjRUVLTbPQCPVU_q1HPgHaK-?w=120&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="" draggable="false" />
                  <h2>Emma</h2>
            <span>$2</span>
            </div>
        
         
          </li>
  
          <li class="card">
            <div class="img">
              <img src="https://i.pinimg.com/originals/6c/2f/de/6c2fde0235ece77e4fc91f8ebe8d8739.jpg" alt="" draggable="false" />
              <h2>Emma</h2>
              <span>$2</span>
            </div>
  
           
          </li>
  
          <li class="card">
            <div class="img">
              <img src="https://data1.ibtimes.co.in/en/full/549060/action-jackson.jpg" alt="" draggable="false" />
              <h2>Emma</h2>
              <span>$2</span>
            </div>
     
         
          </li>
  
          <li class="card">
            <div class="img">
              <img src="https://th.bing.com/th/id/OIP.1umjRUVLTbPQCPVU_q1HPgHaK-?w=120&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="" draggable="false" />
              
            <h2>Emma</h2>
            <span>$2</span>
            </div>
  
          </li>
  
          <li class="card">
            <div class="img">
              <img src="https://th.bing.com/th/id/OIP.ng38lIHD2D_dQre8DTxjhgHaKs?w=117&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="" draggable="false" />
              <h2>Emma</h2>
              <span>$2</span>
            </div>
  
         
          </li>
  
          <li class="card">
            <div class="img">
            
                    <img src="https://i.pinimg.com/736x/0d/85/d5/0d85d5a61d012f3fc8afb79e20d8641d.jpg" alt="" draggable="false" />
        
                    <h2>Emma</h2>
                    <span>$2</span>
 
            
     
            
            </div>
  
           
          </li>
        </ul>
        <i class="fas fa-angle-right" id="right"></i>
      </div>
      

      
    
</body>
</html>
<script>
 let carousel = document.querySelector(".carousel");
let btns = document.querySelectorAll(".wrapper i");
let carouselChildren = [...carousel.children];
let wrapper = document.querySelector(".wrapper");


let cardWidth = carousel.querySelector(".card").offsetWidth;
let isDragging = false,
  startX,
  startScrollLeft,
  isAutoPlay = true,
  timeoutId;


let cardsPerView = Math.round(carousel.offsetWidth / cardWidth);


carouselChildren
  .slice(-cardsPerView)
  .reverse()
  .forEach((card) => {
    carousel.insertAdjacentHTML("afterbegin", card.outerHTML);
  });

//inserting copied few first cards to end of the carousel for infinite scrolling
carouselChildren.slice(0, cardsPerView).forEach((card) => {
  carousel.insertAdjacentHTML("beforeend", card.outerHTML);
});

btns.forEach((btn) => {
  btn.addEventListener("click", () => {
    //if the clicked button id is left scrolling carousel towards left by card width else towards right by card width
    carousel.scrollLeft += btn.id == "left" ? -cardWidth : cardWidth;
  });
});

let dragStart = (e) => {
  isDragging = true;

  carousel.classList.add("dragging");

  //recording initial cursor and scroll position
  startX = e.pageX;
  startScrollLeft = carousel.scrollLeft;
};

let dragging = (e) => {
  //returning here if the isDragging value is false
  if (!isDragging) return;

  //scrolling carousel according to mouse cursor
  carousel.scrollLeft = startScrollLeft - (e.pageX - startX);
};

let dragStop = () => {
  isDragging = false;

  carousel.classList.remove("dragging");
};

let infiniteScroll = () => {
  //if the carousel is at begining, scroll to end
  //else carousel at end , scroll to beginning
  if (carousel.scrollLeft === 0) {
    carousel.classList.add("no-transition");
    carousel.scrollLeft = carousel.scrollWidth - 2 * carousel.offsetWidth;
    carousel.classList.remove("no-transition");
  } else if (
    Math.ceil(carousel.scrollLeft) ===
    carousel.scrollWidth - carousel.offsetWidth
  ) {
    carousel.classList.add("no-transition");
    carousel.scrollLeft = carousel.offsetWidth;
    carousel.classList.remove("no-transition");
  }

  //clearing timeout & starting auto play if the mouse is not hovering the carousel
  clearTimeout(timeoutId);
  if (!wrapper.matches(":hover")) autoPlay();
};

let autoPlay = () => {
  //if the device is not mobile or tab, enabling auto play
  if (window.innerWidth < 800 || !isAutoPlay) return; //returning if the device is not desktop & isAutoPlay is false

  //autoplaying the carousel after every 2500 ms
  timeoutId = setTimeout(() => {
    carousel.scrollLeft += cardWidth;
  }, 2500);
};

autoPlay();

carousel.addEventListener("mousedown", dragStart);
carousel.addEventListener("mousemove", dragging);
document.addEventListener("mouseup", dragStop);
carousel.addEventListener("scroll", infiniteScroll);

//auto play will be active only when there is no hover on carousel
wrapper.addEventListener("mouseenter", () => clearTimeout(timeoutId));
wrapper.addEventListener("mouseleave", autoPlay);

















    
let signup = document.querySelector("#signupme");
signup.addEventListener("click", myfuncsignup);



async function myfuncsignup(e) {
  e.preventDefault();
  window.location.href = "./login.html";
}

    let logout = document.getElementById("logout")
    logout.addEventListener("click", myfunclogout);


    async function myfunclogout(e) {
  e.preventDefault();

  console.log(token);

  try {
    let data = await fetch("http://localhost:3000/user/logout", {
      method: "GET",
      headers: {
        "Content-type": "application/json",
        Authorization: `Bearer ${token}`,
      },
    });
    data = await data.json();
    console.log(data);
    alert(data.msg);
    if (data.msg == "logout successfull") {
      localStorage.removeItem("token");
      let logouthide = document.querySelector("#logoutme");

      logouthide.style.display = "none";
    }
  } catch (error) {
    console.log(error);
  }
}

let token = localStorage.getItem("token") || null;
let logouthide = document.querySelector("#logout");
if (!token) {
  logouthide.style.display = "none";
} else {
  logouthide.style.display = "block";
}

</script>